{"debug_symbols":[{"locations":{"0":[{"span":{"start":1468,"end":1503},"file":1}],"1":[{"span":{"start":1468,"end":1503},"file":1}],"2":[{"span":{"start":1468,"end":1503},"file":1}],"3":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3599,"end":3611},"file":23}],"4":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3599,"end":3614},"file":23}],"5":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3599,"end":3614},"file":23}],"6":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3636,"end":3655},"file":23}],"7":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3636,"end":3655},"file":23}],"8":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"9":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"10":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"11":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"12":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"13":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"14":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3801,"end":3804},"file":23}],"15":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3801,"end":3804},"file":23}],"16":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"17":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"18":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"19":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"20":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"21":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"22":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"23":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"24":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"25":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"26":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3599,"end":3611},"file":23}],"27":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3599,"end":3614},"file":23}],"28":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3599,"end":3614},"file":23}],"29":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3636,"end":3655},"file":23}],"30":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3636,"end":3655},"file":23}],"31":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"32":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"33":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"34":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"35":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"36":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"37":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3801,"end":3804},"file":23}],"38":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3801,"end":3804},"file":23}],"39":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"40":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"41":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"42":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"43":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"44":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"45":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"46":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"47":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"48":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"49":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"50":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"51":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"52":[{"span":{"start":1468,"end":1503},"file":1}],"53":[{"span":{"start":1468,"end":1503},"file":1}],"54":[{"span":{"start":1468,"end":1503},"file":1}],"55":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3545,"end":3550},"file":23}],"56":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3545,"end":3550},"file":23}],"57":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3545,"end":3550},"file":23}],"58":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3572,"end":3577},"file":23}],"59":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3572,"end":3577},"file":23}],"60":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3572,"end":3577},"file":23}],"61":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3599,"end":3611},"file":23}],"62":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3599,"end":3614},"file":23}],"63":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3599,"end":3614},"file":23}],"64":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3636,"end":3655},"file":23}],"65":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3636,"end":3655},"file":23}],"66":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"67":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"68":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"69":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"70":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"71":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"72":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3801,"end":3804},"file":23}],"73":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3801,"end":3804},"file":23}],"74":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"75":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"76":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"77":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"78":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"79":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"80":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"81":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"82":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"83":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"84":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3545,"end":3550},"file":23}],"85":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3545,"end":3550},"file":23}],"86":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3545,"end":3550},"file":23}],"87":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3572,"end":3577},"file":23}],"88":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3572,"end":3577},"file":23}],"89":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3572,"end":3577},"file":23}],"90":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3599,"end":3611},"file":23}],"91":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3599,"end":3614},"file":23}],"92":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3599,"end":3614},"file":23}],"93":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3636,"end":3655},"file":23}],"94":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3636,"end":3655},"file":23}],"95":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"96":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"97":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"98":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"99":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"100":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"101":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3801,"end":3804},"file":23}],"102":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3801,"end":3804},"file":23}],"103":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"104":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"105":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"106":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"107":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"108":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"109":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"110":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"111":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"112":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"113":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"114":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"115":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"116":[{"span":{"start":1468,"end":1503},"file":1}],"117":[{"span":{"start":1468,"end":1503},"file":1}],"118":[{"span":{"start":1468,"end":1503},"file":1}],"119":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3545,"end":3550},"file":23}],"120":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3545,"end":3550},"file":23}],"121":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3545,"end":3550},"file":23}],"122":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3572,"end":3577},"file":23}],"123":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3572,"end":3577},"file":23}],"124":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3572,"end":3577},"file":23}],"125":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3599,"end":3611},"file":23}],"126":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3599,"end":3614},"file":23}],"127":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3599,"end":3614},"file":23}],"128":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3636,"end":3655},"file":23}],"129":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3636,"end":3655},"file":23}],"130":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"131":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"132":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"133":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"134":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"135":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"136":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3801,"end":3804},"file":23}],"137":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3801,"end":3804},"file":23}],"138":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"139":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"140":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"141":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"142":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"143":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"144":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"145":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"146":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"147":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"148":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3545,"end":3550},"file":23}],"149":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3545,"end":3550},"file":23}],"150":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3545,"end":3550},"file":23}],"151":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3572,"end":3577},"file":23}],"152":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3572,"end":3577},"file":23}],"153":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3572,"end":3577},"file":23}],"154":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3599,"end":3611},"file":23}],"155":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3599,"end":3614},"file":23}],"156":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3599,"end":3614},"file":23}],"157":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3636,"end":3655},"file":23}],"158":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3636,"end":3655},"file":23}],"159":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"160":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"161":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"162":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"163":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"164":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"165":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3801,"end":3804},"file":23}],"166":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3801,"end":3804},"file":23}],"167":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"168":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"169":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"170":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"171":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"172":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"173":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"174":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"175":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"176":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"177":[{"span":{"start":1541,"end":1599},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"178":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"179":[{"span":{"start":1600,"end":1660},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"180":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3190,"end":3205},"file":23},{"span":{"start":1609,"end":1612},"file":23}],"181":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3190,"end":3205},"file":23},{"span":{"start":1609,"end":1612},"file":23}],"182":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3190,"end":3205},"file":23},{"span":{"start":1609,"end":1612},"file":23}],"183":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3190,"end":3205},"file":23},{"span":{"start":1609,"end":1612},"file":23}],"184":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3190,"end":3205},"file":23},{"span":{"start":1609,"end":1612},"file":23}],"185":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3190,"end":3205},"file":23},{"span":{"start":1609,"end":1612},"file":23}],"186":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3599,"end":3611},"file":23}],"187":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3599,"end":3614},"file":23}],"188":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3599,"end":3614},"file":23}],"189":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3636,"end":3655},"file":23}],"190":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3636,"end":3655},"file":23}],"191":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"192":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"193":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"194":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"195":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"196":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"197":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3801,"end":3804},"file":23}],"198":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3801,"end":3804},"file":23}],"199":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"200":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"201":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"202":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"203":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"204":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"205":[{"span":{"start":1846,"end":1911},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"206":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3190,"end":3205},"file":23},{"span":{"start":1609,"end":1612},"file":23}],"207":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3190,"end":3205},"file":23},{"span":{"start":1609,"end":1612},"file":23}],"208":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3190,"end":3205},"file":23},{"span":{"start":1609,"end":1612},"file":23}],"209":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3190,"end":3205},"file":23},{"span":{"start":1609,"end":1612},"file":23}],"210":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3190,"end":3205},"file":23},{"span":{"start":1609,"end":1612},"file":23}],"211":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3190,"end":3205},"file":23},{"span":{"start":1609,"end":1612},"file":23}],"212":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3599,"end":3611},"file":23}],"213":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3599,"end":3614},"file":23}],"214":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3599,"end":3614},"file":23}],"215":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3636,"end":3655},"file":23}],"216":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3636,"end":3655},"file":23}],"217":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"218":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"219":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"220":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"221":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"222":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3776,"end":3779},"file":23}],"223":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3801,"end":3804},"file":23}],"224":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3171,"end":3206},"file":23},{"span":{"start":3801,"end":3804},"file":23}],"225":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"226":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"227":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"228":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7940,"end":7943},"file":23}],"229":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"230":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"231":[{"span":{"start":1912,"end":1977},"file":1},{"span":{"start":3171,"end":3220},"file":23},{"span":{"start":7945,"end":7948},"file":23}],"232":[{"span":{"start":2061,"end":2128},"file":1}],"233":[{"span":{"start":2061,"end":2128},"file":1}],"234":[{"span":{"start":2061,"end":2128},"file":1}],"235":[{"span":{"start":2061,"end":2128},"file":1}],"236":[{"span":{"start":2061,"end":2128},"file":1}],"237":[{"span":{"start":2146,"end":2213},"file":1}],"238":[{"span":{"start":2146,"end":2213},"file":1}],"239":[{"span":{"start":2146,"end":2213},"file":1}],"240":[{"span":{"start":2146,"end":2213},"file":1}],"241":[{"span":{"start":2146,"end":2213},"file":1}],"242":[{"span":{"start":2231,"end":2298},"file":1}],"243":[{"span":{"start":2231,"end":2298},"file":1}],"244":[{"span":{"start":2231,"end":2298},"file":1}],"245":[{"span":{"start":2231,"end":2298},"file":1}],"246":[{"span":{"start":2231,"end":2298},"file":1}],"247":[{"span":{"start":2060,"end":2299},"file":1}],"248":[{"span":{"start":2316,"end":2383},"file":1}],"249":[{"span":{"start":2316,"end":2383},"file":1}],"250":[{"span":{"start":2316,"end":2383},"file":1}],"251":[{"span":{"start":2316,"end":2383},"file":1}],"252":[{"span":{"start":2316,"end":2383},"file":1}],"253":[{"span":{"start":2060,"end":2384},"file":1}],"254":[{"span":{"start":2060,"end":2384},"file":1}]}}],"file_map":{"1":{"source":"/* Note: Exponential ElGamal only supports plaintexts constrained to 40 bits, \nbecause solving the Discrete Log is needed during decryption\nIt is the responsiblity of the smart contract developer to ensure \nthat all plaintexts are in the u40 range before encryption\n*/\nuse dep::std::ec::tecurve::affine::Curve as AffineCurve;\nuse dep::std::ec::tecurve::affine::Point as Gaffine;\nuse dep::std::collections::vec::Vec;\nuse dep::std;\nuse dep::bjj;\n\n/* Code of the circuit used at each transfer of the token to prove the validity of transfer (sender \nhas enough balance) and correctness of encrypted new balances of sender and receiver.\nTo be sure this is not vulnerable, we added a check in the smart contract to make sure that sender\nis different from receiver (a nonce variable is not needed in our case because transfers are \ninitiated by from=msg.sender in the contract, so replay attack is impossible)\n*/\nfn main(// All Public inputs, this can be executed by anyone\n        balance_old_to_encrypted_1: pub Gaffine, \n        balance_old_to_encrypted_2: pub Gaffine,\n        balance_new_to_encrypted_1: pub Gaffine, \n        balance_new_to_encrypted_2: pub Gaffine,\n        encrypted_values: pub [Gaffine; 8],\n    ) { \n\n    // check that new balance = the balance_old_me_clear - fee\n    let bjj_affine = bjj::get_affine_curve();\n    \n    let mut encrypted_value_sum = (encrypted_values[0], encrypted_values[1]);\n\n    for i in 1..4 {\n        let mut s = i*2;\n        if(encrypted_values[s].x as Field != 0){\n            encrypted_value_sum = (bjj_affine.add(encrypted_value_sum.0, encrypted_values[s]),bjj_affine.add(encrypted_value_sum.1, encrypted_values[s+1]));\n        }\n    }\n\n    // addition of the points on Baby Jubjub : this operation is additevely homomorphic for Exponential ElGamal\n    let balance_new_to_encrypted_computed = \n        (bjj_affine.add(balance_old_to_encrypted_1, encrypted_value_sum.0),bjj_affine.add(balance_old_to_encrypted_2, encrypted_value_sum.1)); \n    // checks that the new encrypted balance of receiver is correct\n    assert((balance_new_to_encrypted_computed.0.x==balance_new_to_encrypted_1.x) & \n            (balance_new_to_encrypted_computed.0.y==balance_new_to_encrypted_1.y) & \n            (balance_new_to_encrypted_computed.1.x==balance_new_to_encrypted_2.x) & \n            (balance_new_to_encrypted_computed.1.y==balance_new_to_encrypted_2.y)); \n}\n\n// Because of a bug in Noir 10.3, this test will cause a stack overflow error, but you can check that it passes via `nargo prove` instead of `nargo test`: the values inside Prover.toml are strictly equivalent to this test\n#[test]\nfn test_main() {\n    let private_key: Field = 2291123624948246627368989940774052753470489062495018070576418670157516550852; // see debug notebook for an example on how to compute those\n    let randomness: Field = 168986485046885582825082387270879151100288537211746581237924789162159767775; // see debug notebook for an example on how to compute those\n    let public_key: Gaffine = bjj::priv_to_pub_key(private_key);\n    let balance: u40 = 1000;\n    let old_encrypted_amount = bjj::exp_elgamal_encrypt(public_key, balance, randomness);\n    let bjj_affine = bjj::get_affine_curve();\n\n\n    // public values\n    let old_balance = bjj::exp_elgamal_encrypt(public_key, balance, randomness);\n    let encryped_value = bjj::exp_elgamal_encrypt(public_key, 100, randomness);\n    let encrypted_values = [encryped_value.0, encryped_value.1, encryped_value.0, encryped_value.1, encryped_value.0, encryped_value.1, encryped_value.0, encryped_value.1];\n    let mut encrypted_value_sum = (encrypted_values[0], encrypted_values[1]);\n    for i in 1..4 {\n        let mut s = i*2;\n        if(encrypted_values[s].x as Field != 0){\n            encrypted_value_sum = (bjj_affine.add(encrypted_value_sum.0, encrypted_values[s]),bjj_affine.add(encrypted_value_sum.1, encrypted_values[s+1]));\n        }\n    }\n\n    let new_balance_encrypted = \n        (bjj_affine.add(old_balance.0, encrypted_value_sum.0),bjj_affine.add(old_balance.1, encrypted_value_sum.1));\n    \n    let base_pt = bjj::get_base_point();\n    let embedded_balance = bjj_affine.mul(1400, base_pt);\n    let decoded_value = bjj::exp_elgamal_decrypt(private_key, new_balance_encrypted);\n    assert(decoded_value.x==embedded_balance.x);\n    assert(decoded_value.y==embedded_balance.y);\n\n    main(old_encrypted_amount.0, old_encrypted_amount.1, new_balance_encrypted.0, new_balance_encrypted.1, encrypted_values);\n}","path":"/home/josh/Documents/GitHub/bojj-base/circuits/process_pending_transfers/src/main.nr"},"23":{"source":"mod affine {\n    // Affine coordinate representation of Twisted Edwards curves\n    // Points are represented by two-dimensional Cartesian coordinates.\n    // Group operations are implemented in terms of those in CurveGroup (in this case, extended Twisted Edwards) coordinates\n    // for reasons of efficiency.\n    // See <https://eprint.iacr.org/2008/522.pdf> for details.\n    use crate::ec::tecurve::curvegroup;\n    use crate::ec::montcurve::affine::Curve as MCurve;\n    use crate::ec::montcurve::affine::Point as MPoint;\n    use crate::ec::swcurve::affine::Curve as SWCurve;\n    use crate::ec::swcurve::affine::Point as SWPoint;\n    // Curve specification\n    struct Curve { // Twisted Edwards curve\n        // Coefficients in defining equation ax^2 + y^2 = 1 + dx^2y^2\n        a: Field,\n        d: Field,\n        // Generator as point in Cartesian coordinates\n        gen: Point\n    }\n    // Point in Cartesian coordinates\n    struct Point {\n        x: Field,\n        y: Field\n    }\n\n    impl Point {\n        // Point constructor\n        pub fn new(x: Field, y: Field) -> Self {\n            Self { x, y }\n        }\n\n        // Check for equality\n        fn eq(self, p: Point) -> bool {\n            let Self {x: x1, y: y1} = self;\n            let Self {x: x2, y: y2} = p;\n\n            (x1 == x2) & (y1 == y2)\n        }\n\n        // Check if zero\n        pub fn is_zero(self) -> bool {\n            self.eq(Point::zero())\n        }\n\n        // Conversion to CurveGroup coordinates\n        fn into_group(self) -> curvegroup::Point {\n            let Self {x, y} = self;\n\n            curvegroup::Point::new(x, y, x*y, 1)\n        }\n\n        // Additive identity\n        pub fn zero() -> Self {\n            Point::new(0,1)\n        }\n\n        // Negation\n        fn negate(self) -> Self {\n            let Self {x, y} = self;\n            Point::new(0-x, y)\n        }\n\n        // Map into prime-order subgroup of equivalent Montgomery curve\n        fn into_montcurve(self) -> MPoint {\n            if self.is_zero() {\n                MPoint::zero()\n            } else {\n                let Self {x, y} = self;\n                let x0 = (1+y)/(1-y);\n                let y0 = (1+y)/(x*(1-y));\n\n                MPoint::new(x0,y0)\n            }\n        }\n    }\n\n    impl Curve {\n        // Curve constructor\n        pub fn new(a: Field, d: Field, gen: Point) -> Curve {\n            // Check curve coefficients\n            assert(a*d*(a-d) != 0);\n            \n            let curve = Curve {a, d, gen};\n\n            // gen should be on the curve\n            assert(curve.contains(curve.gen));\n\n            curve\n        }\n\n        // Conversion to CurveGroup coordinates\n        fn into_group(self) -> curvegroup::Curve {\n            let Curve{a, d, gen} = self;\n\n            curvegroup::Curve {a, d, gen: gen.into_group()}\n        }\n        \n        // Membership check\n        pub fn contains(self, p: Point) -> bool {\n            let Point {x, y} = p;\n            self.a*x*x + y*y == 1 + self.d*x*x*y*y\n        }\n        \n        // Point addition, implemented in terms of mixed addition for reasons of efficiency\n        pub fn add(self, p1: Point, p2: Point) -> Point {\n            self.mixed_add(p1, p2.into_group()).into_affine()\n        }\n\n        // Mixed point addition, i.e. first argument in affine, second in CurveGroup coordinates.\n        fn mixed_add(self, p1: Point, p2: curvegroup::Point) -> curvegroup::Point {\n            let Point{x: x1, y: y1} = p1;\n            let curvegroup::Point{x: x2, y: y2, t: t2, z: z2} = p2;\n\n            let a = x1*x2;\n            let b = y1*y2;\n            let c = self.d*x1*y1*t2;\n            let e = (x1 + y1)*(x2 + y2) - a - b;\n            let f = z2 - c;\n            let g = z2 + c;\n            let h = b - self.a*a;\n\n            let x = e*f;\n            let y = g*h;\n            let t = e*h;\n            let z = f*g;\n\n            curvegroup::Point::new(x,y,t,z)\n        }\n\n        // Scalar multiplication with scalar represented by a bit array (little-endian convention).\n        // If k is the natural number represented by `bits`, then this computes p + ... + p k times.\n        fn bit_mul<N>(self, bits: [u1; N], p: Point) -> Point {\n            self.into_group().bit_mul(bits, p.into_group()).into_affine()\n        }\n        \n        // Scalar multiplication (p + ... + p n times)\n        fn mul(self, n: Field, p: Point) -> Point {\n            self.into_group().mul(n, p.into_group()).into_affine()\n        }\n\n        // Multi-scalar multiplication (n[0]*p[0] + ... + n[N]*p[N], where * denotes scalar multiplication)\n        fn msm<N>(self, n: [Field; N], p: [Point; N]) -> Point {\n            let mut out = Point::zero();\n\n            for i in 0..N {\n                out = self.add(out, self.mul(n[i], p[i]));\n            }\n\n            out\n        }\n\n        // Point subtraction\n        fn subtract(self, p1: Point, p2: Point) -> Point {\n            self.add(p1, p2.negate())\n        }\n\n        // Conversion to equivalent Montgomery curve\n        pub fn into_montcurve(self) -> MCurve {\n            let j = 2*(self.a + self.d)/(self.a - self.d);\n            let k = 4/(self.a - self.d);\n            let gen_montcurve = self.gen.into_montcurve();\n            \n            MCurve::new(j, k, gen_montcurve)\n        }\n\n        // Conversion to equivalent Short Weierstraß curve\n        pub fn into_swcurve(self) -> SWCurve {\n            self.into_montcurve().into_swcurve()\n        }\n\n        // Point mapping into equivalent Short Weierstraß curve\n        pub fn map_into_swcurve(self, p: Point) -> SWPoint {\n            self.into_montcurve().map_into_swcurve(p.into_montcurve())\n        }\n\n        // Point mapping from equivalent Short Weierstraß curve\n        fn map_from_swcurve(self, p: SWPoint) -> Point {\n            self.into_montcurve().map_from_swcurve(p).into_tecurve()\n        }\n\n        // Elligator 2 map-to-curve method (via rational map)\n        fn elligator2_map(self, u: Field) -> Point {\n            self.into_montcurve().elligator2_map(u).into_tecurve()\n        }\n\n        // Simplified SWU map-to-curve method (via rational map)\n        fn swu_map(self, z: Field, u: Field) -> Point {\n            self.into_montcurve().swu_map(z,u).into_tecurve()\n        }\n    }\n}\nmod curvegroup {\n    // CurveGroup coordinate representation of Twisted Edwards curves\n    // Points are represented by four-dimensional projective coordinates, viz. extended Twisted Edwards coordinates.\n    // See §3 of <https://eprint.iacr.org/2008/522.pdf> for details.\n    use crate::ec::tecurve::affine;\n    use crate::ec::montcurve::curvegroup::Curve as MCurve;\n    use crate::ec::montcurve::curvegroup::Point as MPoint;\n    use crate::ec::swcurve::curvegroup::Curve as SWCurve;\n    use crate::ec::swcurve::curvegroup::Point as SWPoint;\n    // Curve specification\n    struct Curve { // Twisted Edwards curve\n        // Coefficients in defining equation a(x^2 + y^2)z^2 = z^4 + dx^2y^2\n        a: Field,\n        d: Field,\n        // Generator as point in projective coordinates\n        gen: Point\n    }\n    // Point in extended twisted Edwards coordinates\n    struct Point {\n        x: Field,\n        y: Field,\n        t: Field,\n        z: Field\n    }\n\n    impl Point {\n        // Point constructor\n        pub fn new(x: Field, y: Field, t: Field, z: Field) -> Self {\n            Self {x, y, t, z}\n        }\n\n        // Check for equality\n        fn eq(self, p: Point) -> bool {\n            let Self {x: x1, y: y1, t: _t1, z: z1} = self;\n            let Self {x: x2, y: y2, t: _t2, z:z2} = p;\n\n            (x1*z2 == x2*z1) & (y1*z2 == y2*z1)\n        }\n\n        // Check if zero\n        pub fn is_zero(self) -> bool {\n            let Self {x, y, t, z} = self;\n            (x == 0) & (y == z) & (y != 0) & (t == 0)\n        }\n\n        // Conversion to affine coordinates\n        pub fn into_affine(self) -> affine::Point {\n            let Self {x, y, t: _t, z} = self;\n\n            affine::Point::new(x/z, y/z)\n        }\n\n        // Additive identity\n        pub fn zero() -> Self {\n            Point::new(0,1,0,1)\n        }\n\n        // Negation\n        fn negate(self) -> Self {\n            let Self {x, y, t, z} = self;\n\n            Point::new(0-x, y, 0-t, z)\n        }\n\n        // Map into prime-order subgroup of equivalent Montgomery curve\n        fn into_montcurve(self) -> MPoint {\n            self.into_affine().into_montcurve().into_group()\n        }\n    }\n\n    impl Curve {\n        // Curve constructor\n        pub fn new(a: Field, d: Field, gen: Point) -> Curve {\n            // Check curve coefficients\n            assert(a*d*(a-d) != 0);\n            \n            let curve = Curve { a, d, gen };\n\n            // gen should be on the curve\n            assert(curve.contains(curve.gen));\n\n            curve\n        }\n\n        // Conversion to affine coordinates\n        pub fn into_affine(self) -> affine::Curve {\n            let Curve{a, d, gen} = self;\n\n            affine::Curve {a, d, gen: gen.into_affine()}\n        }\n\n        // Membership check\n        pub fn contains(self, p: Point) -> bool {\n            let Point {x, y, t, z} = p;\n\n            (z != 0) & (z*t == x*y) & (z*z*(self.a*x*x + y*y) == z*z*z*z + self.d*x*x*y*y)\n        }\n\n        // Point addition\n        pub fn add(self, p1: Point, p2: Point) -> Point {\n            let Point{x: x1, y: y1, t: t1, z: z1} = p1;\n            let Point{x: x2, y: y2, t: t2, z: z2} = p2;\n\n            let a = x1*x2;\n            let b = y1*y2;\n            let c = self.d*t1*t2;\n            let d = z1*z2;\n            let e = (x1 + y1)*(x2 + y2) - a - b;\n            let f = d - c;\n            let g = d + c;\n            let h = b - self.a*a;\n\n            let x = e*f;\n            let y = g*h;\n            let t = e*h;\n            let z = f*g;\n\n            Point::new(x,y,t,z)\n        }\n\n        // Point doubling, cf. §3.3\n        pub fn double(self, p: Point) -> Point {\n            let Point{x, y, t: _t, z} = p;\n\n            let a = x*x;\n            let b = y*y;\n            let c = 2*z*z;\n            let d = self.a*a;\n            let e = (x + y)*(x + y) - a - b;\n            let g = d + b;\n            let f = g - c;\n            let h = d - b;\n\n            let x0 = e*f;\n            let y0 = g*h;\n            let t0 = e*h;\n            let z0 = f*g;\n\n            Point::new(x0, y0, t0, z0)\n        }\n\n        // Scalar multiplication with scalar represented by a bit array (little-endian convention).\n        // If k is the natural number represented by `bits`, then this computes p + ... + p k times.\n        fn bit_mul<N>(self, bits: [u1; N], p: Point) -> Point {\n            let mut out = Point::zero();\n            \n            for i in 0..N {\n                out = self.add(\n                    self.add(out, out),\n                    if(bits[N - i - 1] == 0) {Point::zero()} else {p});\n            }\n\n            out\n        }\n        \n        // Scalar multiplication (p + ... + p n times)\n        pub fn mul(self, n: Field, p: Point) -> Point {\n            let N_BITS = crate::field::modulus_num_bits();\n\n            // TODO: temporary workaround until issue 1354 is solved\n            let mut n_as_bits: [u1; 254] = [0; 254];\n            let tmp = n.to_le_bits(N_BITS as u32);\n            for i in 0..254 {\n               n_as_bits[i] = tmp[i]; \n            }\n\n            self.bit_mul(n_as_bits, p)\n        }\n\n        // Multi-scalar multiplication (n[0]*p[0] + ... + n[N]*p[N], where * denotes scalar multiplication)\n        fn msm<N>(self, n: [Field; N], p: [Point; N]) -> Point {\n            let mut out = Point::zero();\n\n            for i in 0..N {\n                out = self.add(out, self.mul(n[i], p[i]));\n            }\n\n            out\n        }\n\n        // Point subtraction\n        fn subtract(self, p1: Point, p2: Point) -> Point {\n            self.add(p1, p2.negate())\n        }\n\n        // Conversion to equivalent Montgomery curve\n        fn into_montcurve(self) -> MCurve {\n            self.into_affine().into_montcurve().into_group()\n        }\n\n        // Conversion to equivalent Short Weierstraß curve\n        fn into_swcurve(self) -> SWCurve {\n            self.into_montcurve().into_swcurve()\n        }\n\n        // Point mapping into equivalent short Weierstraß curve\n        pub fn map_into_swcurve(self, p: Point) -> SWPoint {\n            self.into_montcurve().map_into_swcurve(p.into_montcurve())\n        }\n\n        // Point mapping from equivalent short Weierstraß curve\n        fn map_from_swcurve(self, p: SWPoint) -> Point {\n            self.into_montcurve().map_from_swcurve(p).into_tecurve()\n        }\n\n        // Elligator 2 map-to-curve method (via rational maps)\n        fn elligator2_map(self, u: Field) -> Point {\n            self.into_montcurve().elligator2_map(u).into_tecurve()\n        }\n\n        // Simplified SWU map-to-curve method (via rational map)\n        fn swu_map(self, z: Field, u: Field) -> Point {\n            self.into_montcurve().swu_map(z,u).into_tecurve()\n        }\n    }\n}\n","path":"std/ec/tecurve.nr"}},"warnings":[]}